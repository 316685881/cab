<!DOCTYPE html>
<html>
<head> 
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>爱家-发布新房源</title>
    <link href="/static/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/css/reset.css" rel="stylesheet">
    <link href="/static/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <link href="/static/plugins/mui/css/mui.min.css" rel="stylesheet">
    <link href="/static/css/my_cab/main.css" rel="stylesheet">
    <link href="/static/css/my_cab/newcar.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <div class="nav-bar">
                <h3 class="page-title">修改车辆</h3>
                <a class="nav-btn fl" href="/mycar.html"><span><i class="fa fa-angle-left fa-2x"></i></span></a>
            </div>
        </div>
        <div class="cars-con">
            <div class="cars-list">
                 <form id="form-car-info">
                    <li>
                        <div class="car-title">
                            <h3>基本信息</h3>
                        </div>
                        <div class="car-content">
                            <div id="top-conn">
    <!--                        top模板填充的地方-->
                            </div>
    <!--                        top模板-->
                            <script id="top-temp" type="text/html">
                            <div class="form-group">
                                <label for="car-title">车辆标题</label>
                                <input type="text" class="form-control" name="title" id="car-title" value="{{car.title}}" required>
                            </div>
                            <div class="form-group">
                                <label for="car-price">每公里价格</label>
                                <input type="number" min="0.00" step="0.01" class="form-control" name="price" id="car-price" value="{{ (car.price/100.0).toFixed(2) }}" required>
                            </div>
                            <div class="form-group">
                                <label for="car-disc">备注</label>
                                <textarea class="form-control" name="disc" id="car-disc" required>{{ car.disc}}</textarea>
                            </div>
                            </script>

                            <div class="form-group" id="area-conn">
                                <label for="area-id">所在城区</label>
                                <select class="form-control" id="area-id" name="area_id">

                                </select>
                                <script type="text/html" id="area-temp">

                                    {{ each areas as area }}
                                        <option value="{{ area.area_id }}">{{ area.area_name }}</option>
                                    {{ /each }}
                                </script>
                            </div>


                        </div>
                    </li>
                    <li>
                        <div class="car-title">
                            <h3>详细信息</h3>
                        </div>
                        <div class="car-content" id="middle-conn">
    <!--                        middle模板填充的地方-->
                        </div>
                        <script id="middle-temp" type="text/html">
                            <div class="form-group">
                                <label for="load">限载</label>
                                <input type="text" class="form-control" name="load" id="load" value="{{car.load}}" required>
                            </div>
                            <div class="form-group">
                                <label for="car-space">车辆空间</label>
                                <input type="number" class="form-control" name="space" id="car-space" value="{{car.space}}" required>
                            </div>
                            <div class="form-group">
                                <label for="car-no">车牌号码</label>
                                <input type="text" class="form-control" name="no" id="car-no" value="{{car.no}}" required>
                            </div>

                            <div class="form-group">
                                <label for="car-size">外形尺寸</label>
                                <input type="text" class="form-control" name="size" id="car-size" placeholder="长×宽×高 单位(米) 如：2x1.8x1"  value="{{car.size}}"required>
                            </div>
                            <div class="form-group">
                                <label for="car-mold">车型</label>
                                <input type="text" class="form-control" name="mold" id="car-mold" value="{{car.mold}}" required>
                            </div>
                        </script>
                    </li>
                    <li>
                        <div class="car-title">
                            <h3>配套设施</h3>
                        </div>
                        <div class="car-content">
                            <ul class="car-facility-list clearfix" id="bottom-conn">

                            </ul>
                            <script id="facility-temp" type="text/html">
                                {{ each facilities as facility }}
                                <li>
                                    <div class="checkbox">
                                         <label>
                                              <input type="checkbox" name="facility" value="{{ facility.facility_id }}">{{ facility.facility_name }}
                                         </label>
                                    </div>
                                </li>
                                {{ /each }}
                            </script>

                        </div>
                    </li>
                    <input type="submit" class="btn btn-success btn-commit" value="更改车辆信息">
                    <div class="error-msg text-center"><i class="fa fa-exclamation-circle"></i>请将全部信息填写完整后再提交</div>
                </form>
            </div>
        </div>

            <form id="form-car-image" action="/api/car/image" method="post" enctype="multipart/form-data">

            </form>
            <script id="image-temp" type="text/html">
                <input type="hidden" name="car_id" id="car-id" value="{{car.car_id}}">
                <li>
                    <div class="car-title">
                        <h3>添加图片</h3>
                    </div>
                    <div class="car-content">
                        <div class="car-image-cons" id="car-image-cons">
                            {{ each car.image_urls as image_url }}
                            <img src="{{ image_url }}">
                            {{ /each }}
                        </div>
                        <div class="form-group">
                            <label for="car-image">选择图片</label>
                            <input type="file" accept="image/*" name="car_image" id="car-image">
                            <input type="file" accept="image/*" capture='camera' name="car_image" id="file">
                            <p>
                                <a href="#picture" class="mui-btn mui-btn-primary mui-btn-block mui-btn-outlined"
                                   style="padding: 5px 20px;">打开actionsheet</a>
				            </p>
                        </div>
                        <input type="submit" class="btn btn-success" value="上传">
                    </div>
                </li>

                <div id="picture" class="mui-popover mui-popover-action mui-popover-bottom mui-active" style="display: none;">
                    <ul class="mui-table-view">
                        <li class="mui-table-view-cell">
                            <a href="#">拍照或录像</a>
                        </li>
                        <li class="mui-table-view-cell">
                            <a href="#" class="">选取现有的</a>
                        </li>
                    </ul>
                    <ul class="mui-table-view">
                        <li class="mui-table-view-cell">
                            <a href="#picture" class=""><b>取消</b></a>
                        </li>
                    </ul>
                </div>
            </script>
        </ul>

        <div class="popup_con">
            <div class="popup">
                <p><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></p>
            </div>
            <div class="mask"></div>
        </div>
        <div class="footer">
            <p><span><i class="fa fa-copyright"></i></span>爱家租房&nbsp;&nbsp;享受家的温馨</p>
        </div> 
    </div>
    
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/jquery.form.min.js"></script>
    <script src="/static/js/template.js"></script>
    <script src="/static/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="/static/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
    <script src="/static/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js"></script>
    <script src="/static/plugins/mui/js/mui.min.js"></script>
    <script src="/static/js/my_cab/updatecar.js"></script>
</body>
</html>